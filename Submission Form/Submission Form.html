<!doctype html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">


    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

    <!-- RACHESS Styles -->
    <link href="styles.css" rel="stylesheet" type="text/css" />


</head>

<body>

    <header class>
        <div class="container h-100">
            <div class="row h-100 align-items-center">
                <div class="col-12 text-center">
                    <h2 class="font-weight-light" style="margin-top:10px">Submission Form</h2>
                    <p class="lead">Thank you for helping the rough sleepers</p>
                </div>
            </div>
        </div>
    </header>
    

    
    
    

    <form>
        <div class="form-group mx-auto" style="width: 500px;">

            <label for="location">
                <h5 class="font-weight-light">Location</h5>
            </label>
            <input type="location" class="form-control" id="location" required="required" placeholder="Please key in the postal code or street address">
            <button type="button" class="btn btn-outline-info btn-sm" style='margin-top: 10px'>Select from Map</button>
            <br>
            <br>
            <h6 class="font-weight-light">Upload a photo (this is optional)</h6>
            <div class="custom-file">


                <label for="uploadfile"></label>
                <input type="file" class="custom-file-input" id="homelessphoto">
                <label class="custom-file-label" for="homelessphoto">Upload a photo of the rough sleeper or location</label>
                <label class='uploadStatusLabel' id='uploadstatuslabel'>You have successfully uploaded an image</label>
            </div>

            <br>
            <br>

            <label for="gender">
                <h6 class="font-weight-light">Gender of Rough Sleepers</h6>
            </label>
            <br>


            <form id='opgender'>
                <label class="radio-inline" style='padding-right: 10px'>
                    <input type="radio" name="opgender" value='M' id='m' checked> Male
                </label>
                <label class="radio-inline">
                    <input type="radio" name="opgender" value='F' id='f'> Female
                </label>
            </form>





            <br>
            <br>
            <label for="gender">
                <h6 class="font-weight-light">Race of Rough Sleeps</h6>
            </label>
            <br>
            <label class="radio-inline" style='padding-right: 5px'><input type="radio" name="oprace" value="chinese" checked> Chinese</label>
            <label class="radio-inline" style='padding-right: 5px'><input type="radio" name="oprace" value="malay"> Malay</label>
            <label class="radio-inline" style='padding-right: 5px'><input type="radio" name="oprace" value="indian"> Indian</label>
            <label class="radio-inline" style='padding-right: 5px'><input type="radio" name="oprace" value="eurasian"> Eurasian</label>
            <label class="radio-inline"><input type="radio" name="oprace"> Others</label>
            <br>
            <br>

            <label for="agerange">
                <h6 class="font-weight-light">How old does this rough sleeper look like?</h6>
            </label>
            <select class="form-control" id="agerange">
                <option>30 and under</option>
                <option>30 - 45</option>
                <option>45 - 60</option>
                <option>60 - 75</option>
                <option>80 onwards</option>
            </select>

            <br>
            <label for="nooftimes">
                <h6 class="font-weight-light">How many times have you seen him/her around?</h6>
            </label>
            <select class="form-control" id="nooftimes">
                <option>Its my first time</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5</option>
                <option>>5</option>
            </select>
            <br>

            <label for="nooftimes">
                <h6 class="font-weight-light">Would this rough sleeper pose a risk? </h6>
            </label>
            <br>
            <select class="form-control" id="risk">
                <option>No</option>
                <option>Maybe</option>
                <option>Yes</option>
            </select>
            <br>
            <br>
            <label for="othernote">Other Note</label>
            <textarea class="form-control" id="othernote" rows="3">Any information you could give?</textarea>

            <br>
            <br>
            <button class="btn btn-outline-success float-right" type="submit" style="margin-bottom: 10px" onclick="myfunc()">Submit form</button>

        </div>




    </form>


    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
    <!-- End of JS -->
    <script>
        $('#myModal').on('shown.bs.modal', function() {
            $('#myInput').trigger('focus')
        })

    </script>

    <script type="text/javascript">
        //------------------------------Upload Success ---------------------------------------------//
        //open upload dialogue box -> successful upload -> success event -> call back function -> modify html document
        const inputElement = document.getElementById('homelessphoto')
        inputElement.onchange = function(event) {
            document.getElementById('uploadstatuslabel').style.display = 'block'
        }

        //---------------------Modal------------------------------------------//

        

        //----------------------Payload-----------------------------------//
        function myfunc() {

            if (document.getElementById("location").value == '') {
                alert("Please fill in the location");
            } else {
                var location = document.getElementById('location')

                var gender = document.querySelector('input[name = opgender]:checked').value
                //console.log(gender)

                var race = document.querySelector('input[name = oprace]:checked').value
                //console.log(race)

                var agerange = document.getElementById('agerange').value
                //console.log(agerange)

                var nooftimes = document.getElementById('nooftimes').value
                //console.log(nooftimes)

                var risk = document.getElementById('risk').value
                //console.log(risk)

            }

            //Write to CSV
            csvRows = [
                [document.getElementById('location').value, document.querySelector('input[name = opgender]:checked').value, document.querySelector('input[name = oprace]:checked').value, document.getElementById('agerange').value, document.getElementById('nooftimes').value, document.getElementById('risk').value]
            ];

            var csvString = csvRows.join("%0A");
            var a = document.createElement('a');
            a.href = 'data:attachment/csv,' + csvString;
            a.target = '_blank';
            a.download = 'myFile.csv';
            document.body.appendChild(a);
            a.click();


        }

    </script>

    <!--                 const payload = {
                    location: location,
                    gender: gender,
                    race: race,
                    agerange: agerange,
                    nooftimes: nooftimes,
                    risk: risk
                }
                console.log(payload) -->


</body>

</html>
